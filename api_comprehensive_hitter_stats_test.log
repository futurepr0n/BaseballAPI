/Users/futurepr0n/Development/Capping.Pro/Claude-Code/BaseballAPI/enhanced_main.py:176: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [66355]
INFO:     Waiting for application startup.
INFO:enhanced_main:Starting enhanced data initialization...
INFO:enhanced_data_handler:Enhanced data handler initialized with 671 players
INFO:enhanced_main:Enhanced data initialization completed successfully
INFO:enhanced_main:- Players loaded: 671
INFO:enhanced_main:- Daily game dates: 184
INFO:enhanced_main:- Enhanced handler ready with fallback strategies
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)
INFO:enhanced_data_handler:✅ PITCHER FOUND: Grant Holmes (ID: 656550, Team: ATL)
INFO:pinhead_ported_functions:🎯 PORTED PITCHER LOOKUP: Grant Holmes
INFO:pinhead_ported_functions:✅ PORTED: Found pitcher in daily data as: G. Holmes
INFO:pinhead_ported_functions:✅ PORTED: Returning 7 recent pitcher games
INFO:pinhead_ported_functions:🎯 PORTED: Calculating pitcher trends for 7 games
INFO:pinhead_ported_functions:🎯 PORTED PITCHER TREND: declining (3.865 -> 3.917)
INFO:enhanced_data_handler:📈 PITCHER TREND: Grant Holmes - Direction: declining
INFO:enhanced_data_handler:📈 PITCHER TREND: Grant Holmes - Direction: declining
INFO:enhanced_data_handler:🏠 Calculating home stats for: Grant Holmes (ID: 656550)
INFO:enhanced_data_handler:🏠 HOME STATS: Grant Holmes - 9 games, 40 H, 6 HR, 65 K
INFO:enhanced_data_handler:🏠 PITCHER HOME STATS: Grant Holmes - 9 home games
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Brett Baty' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Brett Baty - 7 games, 4/22 (Recent Avg: 0.217, HR Rate: 4.5%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 18, PA: 24, BB: 2, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Brett Baty (ID: 683146)
INFO:enhanced_data_handler:🏏 HITTER STATS: Brett Baty - 58 games, SLG: 0.354, H since HR: 4, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Brandon Nimmo' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Brandon Nimmo - 7 games, 9/25 (Recent Avg: 0.248, HR Rate: 8.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 16, PA: 28, BB: 3, K: 6
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Brandon Nimmo (ID: 607043)
INFO:enhanced_data_handler:🏏 HITTER STATS: Brandon Nimmo - 76 games, SLG: 0.410, H since HR: 0, Heating up: 9.6
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Francisco Alvarez' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Francisco Alvarez - 7 games, 6/26 (Recent Avg: 0.241, HR Rate: 7.7%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 20, PA: 29, BB: 3, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Francisco Alvarez (ID: 682626)
INFO:enhanced_data_handler:🏏 HITTER STATS: Francisco Alvarez - 35 games, SLG: 0.309, H since HR: 15, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Francisco Lindor' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Francisco Lindor - 7 games, 6/29 (Recent Avg: 0.269, HR Rate: 6.9%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 23, PA: 30, BB: 1, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Francisco Lindor (ID: 596019)
INFO:enhanced_data_handler:🏏 HITTER STATS: Francisco Lindor - 78 games, SLG: 0.422, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Jeff McNeil' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Jeff McNeil - 7 games, 4/25 (Recent Avg: 0.255, HR Rate: 4.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 21, PA: 26, BB: 1, K: 4
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Jeff McNeil (ID: 643446)
INFO:enhanced_data_handler:🏏 HITTER STATS: Jeff McNeil - 48 games, SLG: 0.407, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Juan Soto' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Juan Soto - 7 games, 6/23 (Recent Avg: 0.251, HR Rate: 13.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 17, PA: 28, BB: 5, K: 5
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Juan Soto (ID: 665742)
INFO:enhanced_data_handler:🏏 HITTER STATS: Juan Soto - 79 games, SLG: 0.434, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Luis Torrens' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Luis Torrens - 7 games, 3/21 (Recent Avg: 0.226, HR Rate: 0.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 18, PA: 22, BB: 1, K: 4
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Luis Torrens (ID: 620443)
INFO:enhanced_data_handler:🏏 HITTER STATS: Luis Torrens - 48 games, SLG: 0.241, H since HR: 4, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Mark Vientos' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Mark Vientos - 7 games, 4/19 (Recent Avg: 0.233, HR Rate: 5.3%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 15, PA: 20, BB: 1, K: 9
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Mark Vientos (ID: 668901)
INFO:enhanced_data_handler:🏏 HITTER STATS: Mark Vientos - 53 games, SLG: 0.326, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Pete Alonso' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Pete Alonso - 7 games, 5/27 (Recent Avg: 0.290, HR Rate: 3.7%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 22, PA: 29, BB: 2, K: 14
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Pete Alonso (ID: 624413)
INFO:enhanced_data_handler:🏏 HITTER STATS: Pete Alonso - 80 games, SLG: 0.465, H since HR: 1, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Starling Marte' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Starling Marte - 7 games, 8/27 (Recent Avg: 0.253, HR Rate: 0.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 19, PA: 29, BB: 2, K: 5
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Starling Marte (ID: 516782)
INFO:enhanced_data_handler:🏏 HITTER STATS: Starling Marte - 52 games, SLG: 0.333, H since HR: 0, Heating up: 0.0
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
🚀 Starting Enhanced Baseball Analysis API...
🔗 API will be available at: http://127.0.0.1:8001
📚 Documentation at: http://127.0.0.1:8001/docs
⚡ Enhanced features: Missing data fallbacks, confidence scoring, team-based estimates
📋 Comprehensive sorting: 26+ sorting options available

=== Initializing Baseball Analysis System ===

--- Building Master Player ID Map from reference CSVs ---
Built Initial ID Map: 727 name->ID entries, 728 ID->name entries.
Searching for daily JSON files with pattern: ../BaseballTracker/build/data/2025/**/*_*_2025.json

Loading daily game data from 184 files found...
Successfully loaded daily data for 184 dates.
✅ Daily data loaded: 184 dates, sample date 2025-04-01 has 380 players

--- Rosters Processed into Master Data ---
Created/Updated entries for 671 players. 471 unmapped from roster.json.
Final ID Map: 1395 name->ID entries, 728 ID->name entries.

--- Merging Detailed 2025 CSV Stats into Master Player Data ---
Processed bbb_LHB_vs_LHP (batters-batted-ball-bat-left-pitch-hand-left-2025.csv): merged data for 87 players.
Processed bbb_LHB_vs_RHP (batters-batted-ball-bat-left-pitch-hand-right-2025.csv): merged data for 115 players.
Processed bbb_RHB_vs_LHP (batters-batted-ball-bat-right-pitch-hand-left-2025.csv): merged data for 148 players.
Processed bbb_RHB_vs_RHP (batters-batted-ball-bat-right-pitch-hand-right-2025.csv): merged data for 121 players.
Processed hitter_overall_ev_stats (hitter_exit_velocity_2025.csv): merged data for 238 players.
Processed pitcher_overall_ev_stats (pitcher_exit_velocity_2025.csv): merged data for 336 players.
Processed hitter_pitch_arsenal_stats (hitterpitcharsenalstats_2025.csv): merged data for 323 players.
Processed pitcher_pitch_arsenal_stats (pitcherpitcharsenalstats_2025.csv): merged data for 287 players.

--- Aggregating 2025 Player Stats from Daily Files ---
Aggregated 2025 stats for 360 players.

--- Calculating 2025 League Averages ---
Calculated 2025 League Averages (from 318 hitters with >= 30 PA):
  AVG: 0.245
  SLG: 0.342
  ISO: 0.097
  AVG_K_PERCENT: 0.224
  AVG_BB_PERCENT: 0.088
  AVG_HARD_HIT_PERCENT: 0.350
  AVG_BRL_PERCENT: 0.093
  AVG_BRL_PA_PERCENT: 0.035

--- Loading Multi-Year Historical Data (CSVs) ---
Loading 2022 data...
  Loaded 2022 hitter_arsenal (898 rows)
  Loaded 2022 pitcher_arsenal (567 rows)
Loading 2023 data...
  Loaded 2023 hitter_arsenal (875 rows)
  Loaded 2023 pitcher_arsenal (550 rows)
Loading 2024 data...
  Loaded 2024 hitter_arsenal (856 rows)
  Loaded 2024 pitcher_arsenal (531 rows)
Multi-year historical data loading complete.

Calculating metric ranges for normalization...
Metric ranges calculation complete.

--- Data Initialization Complete ---
🧪 Comprehensive lookup testing: Available but skipped during startup
Calculating real-time league averages by pitch type...
Calculated league averages for 8 pitch types
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Brett Baty'
   Matched roster fullName: 'Brett Baty'
   Using roster name for daily lookup: 'B. Baty'
   Player team: NYM
📈 Found 58 total games for 'B. Baty', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Brandon Nimmo'
   Matched roster fullName: 'Brandon Nimmo'
   Using roster name for daily lookup: 'B. Nimmo'
   Player team: NYM
📈 Found 75 total games for 'B. Nimmo', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Francisco Alvarez'
   Matched roster fullName: 'Francisco Alvarez'
   Using roster name for daily lookup: 'F. Alvarez'
   Player team: NYM
📈 Found 35 total games for 'F. Alvarez', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Francisco Lindor'
   Matched roster fullName: 'Francisco Lindor'
   Using roster name for daily lookup: 'F. Lindor'
   Player team: NYM
📈 Found 77 total games for 'F. Lindor', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Jeff McNeil'
   Matched roster fullName: 'Jeff McNeil'
   Using roster name for daily lookup: 'J. McNeil'
   Player team: NYM
📈 Found 48 total games for 'J. McNeil', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Juan Soto'
   Matched roster fullName: 'Juan Soto'
   Using roster name for daily lookup: 'J. Soto'
   Player team: NYM
📈 Found 78 total games for 'J. Soto', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Luis Torrens'
   Matched roster fullName: 'Luis Torrens'
   Using roster name for daily lookup: 'L. Torrens'
   Player team: NYM
📈 Found 48 total games for 'L. Torrens', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Mark Vientos'
   Matched roster fullName: 'Mark Vientos'
   Using roster name for daily lookup: 'M. Vientos'
   Player team: NYM
📈 Found 52 total games for 'M. Vientos', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Pete Alonso'
   Matched roster fullName: 'Pete Alonso'
   Using roster name for daily lookup: 'P. Alonso'
   Player team: NYM
📈 Found 79 total games for 'P. Alonso', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Starling Marte'
   Matched roster fullName: 'Starling Marte'
   Using roster name for daily lookup: 'S. Marte'
   Player team: NYM
📈 Found 51 total games for 'S. Marte', returning last 7 games
INFO:     127.0.0.1:63069 - "POST /analyze/pitcher-vs-team HTTP/1.1" 200 OK
INFO:enhanced_data_handler:✅ PITCHER FOUND: Grant Holmes (ID: 656550, Team: ATL)
INFO:pinhead_ported_functions:🎯 PORTED PITCHER LOOKUP: Grant Holmes
INFO:pinhead_ported_functions:✅ PORTED: Found pitcher in daily data as: G. Holmes
INFO:pinhead_ported_functions:✅ PORTED: Returning 7 recent pitcher games
INFO:pinhead_ported_functions:🎯 PORTED: Calculating pitcher trends for 7 games
INFO:pinhead_ported_functions:🎯 PORTED PITCHER TREND: declining (3.865 -> 3.917)
INFO:enhanced_data_handler:📈 PITCHER TREND: Grant Holmes - Direction: declining
INFO:enhanced_data_handler:📈 PITCHER TREND: Grant Holmes - Direction: declining
INFO:enhanced_data_handler:🏠 Calculating home stats for: Grant Holmes (ID: 656550)
INFO:enhanced_data_handler:🏠 HOME STATS: Grant Holmes - 9 games, 40 H, 6 HR, 65 K
INFO:enhanced_data_handler:🏠 PITCHER HOME STATS: Grant Holmes - 9 home games
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Brett Baty' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Brett Baty - 7 games, 4/22 (Recent Avg: 0.217, HR Rate: 4.5%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 18, PA: 24, BB: 2, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Brett Baty (ID: 683146)
INFO:enhanced_data_handler:🏏 HITTER STATS: Brett Baty - 58 games, SLG: 0.354, H since HR: 4, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Brandon Nimmo' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Brandon Nimmo - 7 games, 9/25 (Recent Avg: 0.248, HR Rate: 8.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 16, PA: 28, BB: 3, K: 6
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Brandon Nimmo (ID: 607043)
INFO:enhanced_data_handler:🏏 HITTER STATS: Brandon Nimmo - 76 games, SLG: 0.410, H since HR: 0, Heating up: 9.6
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Francisco Alvarez' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Francisco Alvarez - 7 games, 6/26 (Recent Avg: 0.241, HR Rate: 7.7%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 20, PA: 29, BB: 3, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Francisco Alvarez (ID: 682626)
INFO:enhanced_data_handler:🏏 HITTER STATS: Francisco Alvarez - 35 games, SLG: 0.309, H since HR: 15, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Francisco Lindor' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Francisco Lindor - 7 games, 6/29 (Recent Avg: 0.269, HR Rate: 6.9%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 23, PA: 30, BB: 1, K: 7
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Francisco Lindor (ID: 596019)
INFO:enhanced_data_handler:🏏 HITTER STATS: Francisco Lindor - 78 games, SLG: 0.422, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Jeff McNeil' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Jeff McNeil - 7 games, 4/25 (Recent Avg: 0.255, HR Rate: 4.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 21, PA: 26, BB: 1, K: 4
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Jeff McNeil (ID: 643446)
INFO:enhanced_data_handler:🏏 HITTER STATS: Jeff McNeil - 48 games, SLG: 0.407, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Juan Soto' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Juan Soto - 7 games, 6/23 (Recent Avg: 0.251, HR Rate: 13.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 17, PA: 28, BB: 5, K: 5
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Juan Soto (ID: 665742)
INFO:enhanced_data_handler:🏏 HITTER STATS: Juan Soto - 79 games, SLG: 0.434, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Luis Torrens' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Luis Torrens - 7 games, 3/21 (Recent Avg: 0.226, HR Rate: 0.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 18, PA: 22, BB: 1, K: 4
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Luis Torrens (ID: 620443)
INFO:enhanced_data_handler:🏏 HITTER STATS: Luis Torrens - 48 games, SLG: 0.241, H since HR: 4, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Mark Vientos' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Mark Vientos - 7 games, 4/19 (Recent Avg: 0.233, HR Rate: 5.3%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 15, PA: 20, BB: 1, K: 9
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Mark Vientos (ID: 668901)
INFO:enhanced_data_handler:🏏 HITTER STATS: Mark Vientos - 53 games, SLG: 0.326, H since HR: 0, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Pete Alonso' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Pete Alonso - 7 games, 5/27 (Recent Avg: 0.290, HR Rate: 3.7%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 22, PA: 29, BB: 2, K: 14
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Pete Alonso (ID: 624413)
INFO:enhanced_data_handler:🏏 HITTER STATS: Pete Alonso - 80 games, SLG: 0.465, H since HR: 1, Heating up: 0.0
INFO:enhanced_data_handler:🔍 COMPREHENSIVE LOOKUP: Searching for 'Starling Marte' in daily data...
INFO:enhanced_data_handler:📊 Available data: 184 daily dates, 1180 roster entries
INFO:enhanced_data_handler:✅ RECENT PERFORMANCE SUCCESS: Starling Marte - 7 games, 8/27 (Recent Avg: 0.253, HR Rate: 0.0%)
INFO:enhanced_data_handler:📊 DETAILED STATS: AB Due: 19, PA: 29, BB: 2, K: 5
INFO:enhanced_data_handler:🏏 Calculating comprehensive hitter stats for: Starling Marte (ID: 516782)
INFO:enhanced_data_handler:🏏 HITTER STATS: Starling Marte - 52 games, SLG: 0.333, H since HR: 0, Heating up: 0.0
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: recent_stats keys: ['total_games', 'total_ab', 'total_hits', 'total_hrs', 'total_bb', 'total_k', 'total_pa_approx', 'avg_avg', 'avg_obp', 'avg_slg', 'hit_rate', 'hr_rate', 'hr_per_pa', 'k_rate', 'bb_rate', 'obp_calc', 'trend_metric', 'trend_recent_val', 'trend_early_val', 'trend_direction', 'trend_magnitude', 'hit_rate_trend']
INFO:enhanced_main:🔍 TRANSFORM DEBUG: trends_summary_obj keys: ['avg_avg', 'hr_per_pa', 'hr_rate', 'total_games', 'total_ab', 'total_hits', 'total_hrs', 'ab_due', 'trend_direction', 'pinhead_trends_full', 'data_source']
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Brett Baty'
   Matched roster fullName: 'Brett Baty'
   Using roster name for daily lookup: 'B. Baty'
   Player team: NYM
📈 Found 58 total games for 'B. Baty', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Brandon Nimmo'
   Matched roster fullName: 'Brandon Nimmo'
   Using roster name for daily lookup: 'B. Nimmo'
   Player team: NYM
📈 Found 75 total games for 'B. Nimmo', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Francisco Alvarez'
   Matched roster fullName: 'Francisco Alvarez'
   Using roster name for daily lookup: 'F. Alvarez'
   Player team: NYM
📈 Found 35 total games for 'F. Alvarez', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Francisco Lindor'
   Matched roster fullName: 'Francisco Lindor'
   Using roster name for daily lookup: 'F. Lindor'
   Player team: NYM
📈 Found 77 total games for 'F. Lindor', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Jeff McNeil'
   Matched roster fullName: 'Jeff McNeil'
   Using roster name for daily lookup: 'J. McNeil'
   Player team: NYM
📈 Found 48 total games for 'J. McNeil', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Juan Soto'
   Matched roster fullName: 'Juan Soto'
   Using roster name for daily lookup: 'J. Soto'
   Player team: NYM
📈 Found 78 total games for 'J. Soto', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Luis Torrens'
   Matched roster fullName: 'Luis Torrens'
   Using roster name for daily lookup: 'L. Torrens'
   Player team: NYM
📈 Found 48 total games for 'L. Torrens', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Mark Vientos'
   Matched roster fullName: 'Mark Vientos'
   Using roster name for daily lookup: 'M. Vientos'
   Player team: NYM
📈 Found 52 total games for 'M. Vientos', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Pete Alonso'
   Matched roster fullName: 'Pete Alonso'
   Using roster name for daily lookup: 'P. Alonso'
   Player team: NYM
📈 Found 79 total games for 'P. Alonso', returning last 7 games
✅ COMPREHENSIVE LOOKUP SUCCESS:
   Input fullName: 'Starling Marte'
   Matched roster fullName: 'Starling Marte'
   Using roster name for daily lookup: 'S. Marte'
   Player team: NYM
📈 Found 51 total games for 'S. Marte', returning last 7 games
INFO:     127.0.0.1:63201 - "POST /analyze/pitcher-vs-team HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [66355]
